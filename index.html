
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fallout Simulation Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { text-align: center; }
    .control { margin-bottom: 10px; }
    label { display: block; margin-bottom: 5px; font-weight: bold; }
    select, input[type="number"] { width: 100%; padding: 8px; }
    #map { height: 500px; margin-top: 20px; }
    #result { margin-top: 20px; }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
</head>
<body>
  <h1>Fallout Simulation Tool</h1>

  <div class="control">
    <label for="plant">Select Nuclear Plant:</label>
    <select id="plant">
      <option value="">-- Select a Plant --</option>
      <option value="bushehr">Bushehr Nuclear Plant (Iran)</option>
      <option value="fukushima">Fukushima Daiichi (Japan)</option>
      <option value="chernobyl">Chernobyl (Ukraine)</option>
    </select>
  </div>

  <div class="control">
    <label for="scenario">Select Scenario Type:</label>
    <select id="scenario">
      <option value="">-- Select Scenario --</option>
      <option value="meltdown">Reactor Meltdown (like Fukushima)</option>
      <option value="fire_explosion">Steam Explosion & Fire (like Chernobyl)</option>
      <option value="attack">Attack-Based High Heat Explosion</option>
    </select>
  </div>

  <div class="control">
    <label for="month">Select Month:</label>
    <select id="month">
      <option value="jan">January</option>
      <option value="feb">February</option>
      <option value="mar">March</option>
      <option value="apr">April</option>
      <option value="may">May</option>
      <option value="jun">June</option>
      <option value="jul">July</option>
      <option value="aug">August</option>
      <option value="sep">September</option>
      <option value="oct">October</option>
      <option value="nov">November</option>
      <option value="dec">December</option>
    </select>
  </div>

  <div class="control">
    <label for="wind">Wind Direction (degrees):</label>
    <input type="number" id="wind" placeholder="e.g., 90 for East" />
  </div>

  <div class="control">
    <label>Click on Map or select plant to simulate fallout center:</label>
    <div id="map"></div>
  </div>

  <div id="result">
    <p><strong>Fallout projection will be displayed here.</strong></p>
  </div>

  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script>
    const plantCoordinates = {
      bushehr: [28.8296, 50.8925],
      fukushima: [37.421, 141.032],
      chernobyl: [51.2768, 30.2219]
    };

    const map = L.map('map').setView([30.0, 50.0], 4);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
    }).addTo(map);

    let falloutCircle;

    function drawFallout(latlng) {
      if (falloutCircle) map.removeLayer(falloutCircle);
      falloutCircle = L.circle(latlng, {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.4,
        radius: 50000
      }).addTo(map);

      document.getElementById('result').innerHTML = `
        <p><strong>Fallout Origin:</strong><br>
        Latitude: ${latlng.lat.toFixed(2)}, Longitude: ${latlng.lng.toFixed(2)}</p>`;
    }

    document.getElementById('plant').addEventListener('change', function () {
      const selected = this.value;
      if (plantCoordinates[selected]) {
        const coords = plantCoordinates[selected];
        const latlng = L.latLng(coords[0], coords[1]);
        map.setView(latlng, 7);
        drawFallout(latlng);
      }
    });

    map.on('click', function(e) {
      drawFallout(e.latlng);
    });
  </script>
</body>
</html>
